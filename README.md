# Scanner111

A modern C# port of [CLASSIC](https://github.com/evildarkarchon/CLASSIC-Fallout4) (Crash Log Auto Scanner & Setup Integrity Checker), providing crash log analysis for Bethesda games (Fallout 4 and Skyrim).

## Overview

**Scanner111** is a cross-platform desktop application built with C# and Avalonia that analyzes crash logs generated by crash logging tools for Bethesda games. It provides detailed diagnostic information, identifies problematic mods and settings, and offers recommendations for resolving crashes.

**Current Status**: Foundation phase - porting functionality from the original Python/Rust hybrid implementation.

### Features (Planned)

- **Crash Log Analysis**: Parse and analyze crash logs from Buffout 4 (Fallout 4) and Crash Logger (Skyrim)
- **~250 Diagnostic Checks**: Comprehensive detection of common crash causes
- **Mod Analysis**: Identify problematic mods and load order issues
- **Settings Validation**: Detect misconfigured game and mod settings
- **Detailed Recommendations**: Step-by-step guidance for resolving detected issues
- **Cross-Platform**: Built with Avalonia for Windows, macOS, and Linux support
- **Modern UI**: Clean, responsive interface using Avalonia MVVM architecture

## Technology Stack

- **.NET 9.0**: Modern, high-performance framework
- **C# 13**: Latest language features with nullable reference types
- **Avalonia 11.3.8**: Cross-platform UI framework
- **ReactiveUI**: MVVM framework for reactive programming
- **xUnit**: Unit testing framework

## Project Structure

```
Scanner111/
├── Scanner111/              # Avalonia MVVM GUI application
│   ├── Views/              # XAML views
│   ├── ViewModels/         # ViewModels
│   └── Models/             # UI models
├── Scanner111.Common/       # Business logic library
│   ├── LogParsing/         # Crash log parsing
│   ├── Analysis/           # Log analysis
│   ├── Models/             # Domain models
│   └── Services/           # Business services
├── Scanner111.Tests/        # GUI tests (xUnit)
├── Scanner111.Common.Tests/ # Business logic tests (xUnit)
├── Code_To_Port/           # READ-ONLY: Original Python/Rust source
└── sample_logs/            # READ-ONLY: 1,312 sample crash logs
    ├── FO4/               # 1,013 Fallout 4 logs
    └── Skyrim/            # 299 Skyrim logs
```

## Getting Started

### Prerequisites

- [.NET 9.0 SDK](https://dotnet.microsoft.com/download/dotnet/9.0) or later
- Visual Studio 2022, JetBrains Rider, or VS Code (with C# extension)
- Git

### Clone and Build

```bash
# Clone the repository
git clone https://github.com/yourusername/Scanner111.git
cd Scanner111

# Initialize submodules (for reference materials)
git submodule update --init --recursive

# Restore dependencies
dotnet restore

# Build the solution
dotnet build

# Run tests
dotnet test

# Run the application
dotnet run --project Scanner111/Scanner111.csproj
```

## Development

### Architecture

Scanner111 follows a clean architecture pattern with strict separation of concerns:

- **Scanner111**: Avalonia UI layer - Views, ViewModels, UI models only
- **Scanner111.Common**: Business logic - Framework-agnostic, fully testable
- **Scanner111.Tests**: UI tests using Avalonia.Headless
- **Scanner111.Common.Tests**: Business logic unit and integration tests

### Porting from Original CLASSIC

The original CLASSIC implementation is available in `Code_To_Port/` as a reference. This hybrid Python/Rust codebase will be used to understand algorithms and business logic during the porting process.

**Reference Materials**:
- `Code_To_Port/`: Original Python/Rust implementation (READ-ONLY)
- `sample_logs/`: 1,312 real crash logs for testing (READ-ONLY)
  - 1,013 Fallout 4 logs
  - 299 Skyrim logs
  - Includes full logs, partial logs, and various crash types

**Note**: `Code_To_Port/` will be removed once feature parity is achieved.

### Running Tests

```bash
# Run all tests
dotnet test

# Run tests with coverage
dotnet test --collect:"XPlat Code Coverage"

# Run specific test project
dotnet test Scanner111.Common.Tests/Scanner111.Common.Tests.csproj

# Run tests in parallel (xUnit default)
dotnet test --parallel
```

**Important**: Never use `--no-build` flag, as it would ignore recent code changes.

### Code Style

- **Nullable reference types**: Enabled across all projects
- **Implicit usings**: Enabled for common namespaces
- **File-scoped namespaces**: Preferred for cleaner code
- **XML documentation**: Required for all public APIs
- **Async/await**: Async-first approach for I/O operations
- **MVVM pattern**: Strict separation of UI and business logic

### Testing Guidelines

- **Test naming**: `MethodName_Scenario_ExpectedResult`
- **Use sample logs**: Test with real crash logs from `sample_logs/`
- **Isolation**: Each test should be independent
- **Coverage goal**: 80%+ for business logic
- **Use xUnit**: `[Fact]` for simple tests, `[Theory]` for parameterized tests

### Handling Sample Logs

The `sample_logs/` directory contains diverse crash logs for testing:

```csharp
[Theory]
[InlineData("sample_logs/FO4/crash-example.log")]
[InlineData("sample_logs/Skyrim/crash-2023-12-07-02-24-27.log")]
public async Task ParseLog_WithRealLogs_Succeeds(string logPath)
{
    var parser = new LogParser();
    var result = await parser.ParseAsync(logPath);
    result.Should().NotBeNull();
}
```

**Important**: Never modify files in `sample_logs/` - they are read-only reference data.

## Contributing

Contributions are welcome! Please follow these guidelines:

1. **Read CLAUDE.md**: Comprehensive development guide for this project
2. **Follow code style**: Match existing patterns and standards
3. **Write tests**: All new features require tests
4. **Document**: Add XML documentation for public APIs
5. **Reference original**: Check `Code_To_Port/` for algorithm reference
6. **Test with real logs**: Use `sample_logs/` to verify functionality

### Development Workflow

1. Create a feature branch
2. Reference the original implementation in `Code_To_Port/`
3. Write tests first (TDD approach)
4. Implement in `Scanner111.Common` (business logic) or `Scanner111` (UI)
5. Test against sample logs
6. Document with XML comments
7. Submit a pull request

## Supported Games

### Fallout 4
- Requires [Buffout 4](https://www.nexusmods.com/fallout4/mods/47359) or [Buffout 4 NG](https://www.nexusmods.com/fallout4/mods/64880) for crash log generation
- 1,013 sample logs available for testing

### Skyrim Special Edition
- Requires [Crash Logger](https://www.nexusmods.com/skyrimspecialedition/mods/59818) for crash log generation
- 299 sample logs available for testing

## License

Licensed under the [GPL-3.0 License](LICENSE) - same as the original CLASSIC project.

## Acknowledgments

- **Original CLASSIC**: [evildarkarchon/CLASSIC-Fallout4](https://github.com/evildarkarchon/CLASSIC-Fallout4)
- **Buffout 4**: Crash logger for Fallout 4
- **Crash Logger**: Crash logger for Skyrim
- **Avalonia**: Cross-platform UI framework
- **ReactiveUI**: MVVM framework

## Resources

- [Avalonia Documentation](https://docs.avaloniaui.net/)
- [.NET 9 Documentation](https://learn.microsoft.com/en-us/dotnet/core/whats-new/dotnet-9/)
- [Original CLASSIC Readme](Code_To_Port/README.md)
- [Sample Logs](sample_logs/)

## Status

This project is in early development. Feature parity with the original CLASSIC implementation is the primary goal. See [CLAUDE.md](CLAUDE.md) for detailed development guidelines.
