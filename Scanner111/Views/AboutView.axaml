<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:Scanner111.ViewModels"
             x:DataType="vm:AboutViewModel"
             x:Class="Scanner111.Views.AboutView">
    <Design.DataContext>
        <vm:AboutViewModel />
    </Design.DataContext>

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="20" Spacing="15" MaxWidth="700" HorizontalAlignment="Left">
            <!-- Header -->
            <TextBlock Text="About CLASSIC" FontSize="28" FontWeight="Bold" Foreground="White" />
            <TextBlock Text="Crash Log Auto Scanner and Setup Integrity Checker"
                       FontSize="14" Foreground="#aaa" />

            <!-- Version Info -->
            <Border BorderBrush="#444" BorderThickness="1" CornerRadius="8" Padding="20" Margin="0,10,0,0">
                <Grid RowDefinitions="Auto,Auto,Auto,Auto" ColumnDefinitions="150,*">
                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Current Version:"
                               FontWeight="Bold" Foreground="White" Margin="0,0,20,10" />
                    <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding CurrentVersion}"
                               Foreground="White" />

                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Latest Version:"
                               FontWeight="Bold" Foreground="White" Margin="0,0,20,10" />
                    <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" Spacing="10">
                        <TextBlock Text="{Binding LatestVersion}" Foreground="White" />
                        <TextBlock Text="(prerelease)" Foreground="#f0ad4e"
                                   IsVisible="{Binding IsPrerelease}" />
                    </StackPanel>

                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Status:"
                               FontWeight="Bold" Foreground="White" Margin="0,0,20,10" />
                    <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding UpdateStatus}"
                               Foreground="#aaa" />

                    <!-- Error message if any -->
                    <TextBlock Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2"
                               Text="{Binding ErrorMessage}"
                               Foreground="#dc3545" TextWrapping="Wrap"
                               IsVisible="{Binding HasError}" Margin="0,10,0,0" />
                </Grid>
            </Border>

            <!-- Update Actions -->
            <StackPanel Orientation="Horizontal" Spacing="10">
                <Button Content="Check for Updates"
                        Command="{Binding CheckForUpdatesCommand}"
                        IsEnabled="{Binding !IsChecking}" />
                <Button Content="Download Update"
                        Command="{Binding OpenReleasePageCommand}"
                        IsVisible="{Binding IsUpdateAvailable}"
                        Classes="Accent" />
                <ProgressBar IsIndeterminate="True" Width="100" Height="20"
                             IsVisible="{Binding IsChecking}" />
            </StackPanel>

            <!-- Release Notes -->
            <Border BorderBrush="#444" BorderThickness="1" CornerRadius="8"
                    Padding="20" Margin="0,10,0,0"
                    IsVisible="{Binding ReleaseNotes, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
                <StackPanel Spacing="10">
                    <TextBlock Text="Release Notes" FontWeight="Bold" Foreground="White" FontSize="16" />
                    <ScrollViewer MaxHeight="300" VerticalScrollBarVisibility="Auto">
                        <TextBlock Text="{Binding ReleaseNotes}"
                                   TextWrapping="Wrap" Foreground="#ccc" />
                    </ScrollViewer>
                </StackPanel>
            </Border>

            <!-- Links -->
            <Border BorderBrush="#444" BorderThickness="1" CornerRadius="8" Padding="20" Margin="0,10,0,0">
                <StackPanel Spacing="10">
                    <TextBlock Text="Links" FontWeight="Bold" Foreground="White" FontSize="16" />
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <Button Content="GitHub Repository" Command="{Binding OpenGitHubCommand}" />
                        <Button Content="Report Issue" Command="{Binding OpenIssuesCommand}" />
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Credits/Info -->
            <Border BorderBrush="#444" BorderThickness="1" CornerRadius="8" Padding="20" Margin="0,10,0,0">
                <StackPanel Spacing="5">
                    <TextBlock Text="Credits" FontWeight="Bold" Foreground="White" FontSize="16" />
                    <TextBlock Text="Originally developed as CLASSIC for Fallout 4" Foreground="#aaa" />
                    <TextBlock Text="C# port: Scanner111" Foreground="#aaa" />
                    <TextBlock Text="Built with .NET 9.0 and Avalonia UI" Foreground="#aaa" />
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</UserControl>

